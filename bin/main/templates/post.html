<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body></body>

<!-- 세션 확인용 -->
<div sec:authorize="isAuthenticated()">
          <p th:text="|${principal}님 환영합니다.|"></p>
          <ul>
              <li th:text="|session.getId = ${#session.getId().toString()}|"></li>
              <li th:text="|session.getAttributeNames = ${#session.getAttributeNames()}|"></li>
              <li th:text="|session.getCreationTime = ${#session}|"></li>
          </ul>
      </div>
      
<form action="/post" accept-charset="utf-8" method="post" enctype="multipart/form-data">
	<input type="hidden" name="_method" value="put" />
	   <!-- put이나 update는 히든 타입으로 붙여주셔야 해요 -->    
	<div class="image_area">
		<input type="file" id="file" name="file" accept="image/*" enctype="multipart/form-data">
		<!-- 이미지가 들어갈 div -->
		<div class="show_img"><img src=""/></div>
		
		<!-- 이미지 선택하면 보여주는 부분 -->
		<script>
			$("#file").change(function () {
				if (this.files && this.files[0]) {
					var reader = new FileReader;
					reader.onload = function (data) {
						$(".show_img img").attr("src", data.target.result).width(500);
					}
					reader.readAsDataURL(this.files[0]);
				}
			});
		</script>
	</div>

	<div class="">
		<label type="text" name="location" />
		<select name="location">
			<option value="">장소를 선택</option>
			<option value="Seo-myeon">서면</option>
			<option value="Main-Gate">정문</option>
		</select>
	</div>

	<div class="">
		시간 : <input type="datetime-local" name="date" /><br>
	</div>

	<div class="">
		<br> 내용 : <input type="text" name="content" /><br>
	</div>

	<br> <br> <input type="submit" value="작성" />
</form>

<br>
---------------------------------------------------------------
<br>

<div id="list"></div>

<form action="/post" accept-charset="utf-8" method="post">
	<input type="hidden" name="_method" value="delete" />
	<fieldset style="width: 150">
		<legend>개인 정보 입력</legend>
		삭제할 예약 번호 : <input type="text" name="num" /><br>
		<br>
	</fieldset>
	<input type="submit" value="delete" />
</form>
<html>
</body>

</html>


<!-- 
<script>$(document).ready(function () {
		$.ajax({
			url: "/post",
			type: "GET",
			data: "",
			dataType: "json",
			contentType: "application/json;charset=UTF-8",
			async: false,
			success: function (data) {
				console.log(data[0]);
				console.log(data[1]);
				console.log(data[2]);
			},
			error: function (xhr, status, error) {
				alert(xhr.responseText);
			},
			complete: function (xhr, status) { }
		});
	});
</script>
 -->